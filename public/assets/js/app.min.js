"use strict";var app=angular.module("qrPonto",["ui.router","ngAnimate","toastr","oc.lazyLoad","oitozero.ngSweetAlert","ui.utils.masks"]);
"use strict";angular.module("qrPonto").controller("AuthCtrl",["$location","msgs","auth",function(o,t,n){var r=this;r.loginMode=!0,r.changeMode=function(){return r.loginMode=!r.loginMode},r.login=function(){n.login(r.empresa,function(n){return n?t.addError(n):o.path("/")})},r.signup=function(){n.signup(r.empresa,function(n){return n?t.addError(n):o.path("/")})},r.getUser=function(){return n.getUser()},r.logout=function(){n.logout(function(){return o.path("/")})},r.buscaCNPJ=function(){n.buscaCNPJ(r.empresa.cnpj,function(n){console.log(n)})}}]);
"use strict";app.controller("ColaboradorCtrl",["tabs","$http","consts","msgs","$ocLazyLoad","SweetAlert",function(e,t,c,a,o,l){var s=this,r=c.apiUrl+"/colaboradores";s.empresa=JSON.parse(localStorage.getItem(c.userKey));var n=c.apiUrl+"/colaborador-empresa/"+s.empresa._id;s.getColaboradores=function(){t.get(n).then(function(o){s.colaboradores=o.data,s.colaborador={},e.show(s,{tabList:!0,tabCreate:!0})}).catch(function(o){a.addError(o.data)})},s.createColaborador=function(){s.colaborador.empresa=s.empresa._id,t.post(r,s.colaborador).then(function(o){s.colaborador={},s.getColaboradores(),a.addSuccess("Colaborador cadastrado com sucesso")}).catch(function(o){a.addError(o.data.errors)})},s.updateColaborador=function(){var o=c.apiUrl+"/colaboradores/"+s.colaborador._id;t.put(o,s.colaborador).then(function(o){s.colaborador={},s.getColaborador(),e.show(s,{tabList:!0,tabCreate:!0}),a.addSuccess("Colaborador alterado com sucesso")}).catch(function(o){a.addError(o.data)})},s.deleteColaborador=function(r){l.swal({title:"Você Tem Certeza?",text:"Deseja Deletar Funcionário?",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Sim, Deletar!",cancelButtonText:"Não, cancelar!",closeOnConfirm:!1,closeOnCancel:!1},function(o){if(o){var a=c.apiUrl+"/colaboradores/"+r._id;t.delete(a,s.colaborador).then(function(o){s.colaborador={},s.getColaboradores(),e.show(s,{tabList:!0,tabCreate:!0})}),l.swal("Deletado!","Seu Funcionário Foi Deletado.","success")}else l.swal("Cancelado",resp.data,"error")})},s.showTabUpdate=function(o){s.colaborador=o,e.show(s,{tabUpdate:!0})},s.showTabDelete=function(o){s.colaborador=o,e.show(s,{tabDelete:!0})},s.cancel=function(){e.show(s,{tabList:!0,tabCreate:!0})},s.getColaboradores()}]);
"use strict";app.constant("consts",{appName:"Qr Ponto",version:"1.0",owner:"Oursys",year:"2019",apiUrl:"https://api-qrponto.oursys.com.br",oapiUrl:"https://api-qrponto.oursys.com.br/oapi",buscaCNPJ:"https://www.receitaws.com.br/v1/cnpj",userKey:"qr_ponto_user"}).run(["$rootScope","consts",function(o,s){o.consts=s}]);
"use strict";app.config(["$stateProvider","$urlRouterProvider",function(e,t){function o(){angular.element(document).ready(function(){setTimeout(function(){var t,o,a,i,e=1,n=$("fieldset").length;function s(e){var t=parseFloat(100/n)*e;t=t.toFixed(),$(".progress-bar").css("width",t+"%")}s(e),$(".next").click(function(){t=$(this).parent(),o=$(this).parent().next(),$("#progressbar li").eq($("fieldset").index(o)).addClass("active"),o.show(),t.animate({opacity:0},{step:function(e){i=1-e,t.css({display:"none",position:"relative"}),o.css({opacity:i})},duration:500}),s(++e)}),$(".previous").click(function(){t=$(this).parent(),a=$(this).parent().prev(),$("#progressbar li").eq($("fieldset").index(t)).removeClass("active"),a.show(),t.animate({opacity:0},{step:function(e){i=1-e,t.css({display:"none",position:"relative"}),a.css({opacity:i})},duration:500}),s(--e)}),$(".submit").click(function(){return!1})},2e3)})}e.state("dashboard",{url:"/dashboard",templateUrl:"dashboard/dashboard.html",controller:function(){setTimeout(function(){document.getElementById("contador-li").classList.remove("active"),document.getElementById("empresa-li").classList.remove("active"),document.getElementById("colaborador-li").classList.remove("active"),document.getElementById("dashboard-li").classList.toggle("active"),o()},500)}}).state("pokemon",{url:"/pokemon",templateUrl:"pokemon/tabs.html"}).state("empresa",{url:"/empresa",templateUrl:"empresa/tabs.html",controller:function(){document.getElementById("contador-li").classList.remove("active"),document.getElementById("empresa-li").classList.toggle("active"),document.getElementById("colaborador-li").classList.remove("active"),document.getElementById("dashboard-li").classList.remove("active"),o()}}).state("colaborador",{url:"/colaborador",templateUrl:"colaborador/tabs.html",controller:function(){document.getElementById("contador-li").classList.remove("active"),document.getElementById("empresa-li").classList.remove("active"),document.getElementById("colaborador-li").classList.toggle("active"),document.getElementById("dashboard-li").classList.remove("active"),o()}}).state("contador",{url:"/contador",templateUrl:"contador/tabs.html",controller:function(){document.getElementById("contador-li").classList.toggle("active"),document.getElementById("empresa-li").classList.remove("active"),document.getElementById("colaborador-li").classList.remove("active"),document.getElementById("dashboard-li").classList.remove("active")}}),t.otherwise("/dashboard")}]).run(["$rootScope","$http","$location","$window","auth",function(e,n,s,l,t){function o(){var o=t.getUser(),a="/auth.html",i=l.location.href.includes(a);o||i?o&&!o.isValid&&t.validateToken(o.token,function(e,t){t?(o.isValid=!0,n.defaults.headers.common.Authorization=o.token,i?l.location.href="/":s.path("/dashboard")):l.location.href=a}):l.location.href=a}o(),e.$on("$locationChangeStart",function(){return o()})}]);
"use strict";app.controller("ContadorCtrl",["tabs","$http","consts","msgs","$ocLazyLoad","SweetAlert",function(a,e,n,o,t,r){var c=this,d=n.apiUrl+"/contadores";c.getContadores=function(){e.get(d).then(function(t){c.contadores=t.data,c.contador={},a.show(c,{tabList:!0,tabCreate:!0})}).catch(function(t){o.addError(t.data.errors)})},c.createContador=function(){e.post(d,c.contador).then(function(t){c.contador={},c.getContadores(),o.addSuccess("Contador Cadastrada com sucesso")}).catch(function(t){o.addError(t.data.errors)})},c.updateContador=function(){var t=n.apiUrl+"/contadores/"+c.contador._id;e.put(t,c.contador).then(function(t){c.contador={},c.getContador(),a.show(c,{tabList:!0,tabCreate:!0}),o.addSuccess("Contador alterada com sucesso")}).catch(function(t){o.addError(t.data)})},c.deleteContador=function(){r.swal({title:"Você Tem Certeza?",text:"Deseja Deletar Contador?",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Sim, Deletar!",cancelButtonText:"Não, cancelar!",closeOnConfirm:!1,closeOnCancel:!0},function(t){if(t){var o=n.apiUrl+"/contadores/"+c.contador._id;e.delete(o,c.contador).then(function(t){c.contador={},c.getContadores(),a.show(c,{tabList:!0,tabCreate:!0})}),r.swal("Deletado!","Seu Contador Foi Deletado.","success")}else r.swal("Cancelled",resp.data,"error")})},c.showTabUpdate=function(t){c.contador=t,a.show(c,{tabUpdate:!0})},c.showTabDelete=function(t){c.contador=t,a.show(c,{tabDelete:!0})},c.cancel=function(){a.show(c,{tabList:!0,tabCreate:!0})},c.getContadores()}]);
"use strict";app.controller("DashboardCtrl",["$http","consts",function(t,a){var o=this;o.getSummary=function(){t.get(a.apiUrl+"/colaboradores/count").then(function(t){o.total=t.data})},o.getSummary()}]);
"use strict";app.controller("EmpresaCtrl",["tabs","$http","consts","msgs","$ocLazyLoad","SweetAlert",function(s,r,o,a,e,n){var c=this,t=o.apiUrl+"/empresas",p=JSON.parse(localStorage.getItem(o.userKey));c.getEmpresas=function(){r.get(t+"/"+p._id).then(function(e){c.empresas=e.data,c.empresa={},s.show(c,{tabList:!0,tabCreate:!0})}).catch(function(e){a.addError(e.data.errors)})},c.createEmpresa=function(){r.post(t,c.empresa).then(function(e){c.empresa={},c.getEmpresas(),a.addSuccess("Empresa Cadastrada com sucesso")}).catch(function(e){a.addError(e.data.errors)})},c.updateEmpresa=function(){var e=o.apiUrl+"/empresas/"+c.empresa._id;r.put(e,c.empresa).then(function(e){c.empresa={},c.getEmpresa(),s.show(c,{tabList:!0,tabCreate:!0}),a.addSuccess("Empresa alterada com sucesso")}).catch(function(e){a.addError(e.data)})},c.deleteEmpresa=function(t){n.swal({title:"Você Tem Certeza?",text:"Deseja Deletar Empresa?",type:"warning",showCancelButton:!0,confirmButtonColor:"#ff4b5b",confirmButtonText:"Sim, Deletar!",cancelButtonText:"Não, cancelar!",closeOnConfirm:!1,closeOnCancel:!0},function(e){if(e){var a=o.apiUrl+"/empresas/"+t._id;r.delete(a,c.empresa).then(function(e){c.empresa={},c.getEmpresas(),s.show(c,{tabList:!0,tabCreate:!0}),n.swal("Deletado!","Sua Empresa Foi Deletada.","success")})}else n.swal("Cancelled",resp.data,"error")})},c.showTabUpdate=function(e){c.empresa=e,s.show(c,{tabUpdate:!0})},c.showTabDelete=function(e){c.empresa=e,s.show(c,{tabDelete:!0})},c.cancel=function(){s.show(c,{tabList:!0,tabCreate:!0})},c.getEmpresas()}]);
"use strict";setTimeout(function(){var i,e,s,n,t=1,a=$("fieldset").length;function o(t){var i=parseFloat(100/a)*t;i=i.toFixed(),$(".progress-bar").css("width",i+"%")}o(t),$(".next").click(function(){i=$(this).parent(),e=$(this).parent().next(),$("#progressbar li").eq($("fieldset").index(e)).addClass("active"),e.show(),i.animate({opacity:0},{step:function(t){n=1-t,i.css({display:"none",position:"relative"}),e.css({opacity:n})},duration:500}),o(++t)}),$(".previous").click(function(){i=$(this).parent(),s=$(this).parent().prev(),$("#progressbar li").eq($("fieldset").index(i)).removeClass("active"),s.show(),i.animate({opacity:0},{step:function(t){n=1-t,i.css({display:"none",position:"relative"}),s.css({opacity:n})},duration:500}),o(--t)}),$(".submit").click(function(){return!1})},700);
"use strict";
"use strict";app.component("valueBox",{bindings:{textColor:"@",value:"@",text:"@",iconClass:"@",colorClass:"@"},template:'\n        <div class="col-md-6 col-lg-6 col-xl-3">\n        <div class="card m-b-30">\n            <div class="card-body">\n                <div class="xp-widget-box">\n                    <div class="float-left">\n                        <h4 class="xp-counter {{ $ctrl.textColor }}">{{ $ctrl.value }}</h4>\n                        <p class="mb-0 font-16 text-muted">{{ $ctrl.text }}</p>\n                    </div>\n                    <div class="float-right">\n                        <div class="xp-widget-icon xp-widget-icon-bg {{ $ctrl.colorClass }}">\n                            <i class="mdi mdi-account-multiple font-30 {{ $ctrl.textColor }}"></i>\n                        </div>\n                    </div>\n                    <div class="clearfix"></div>\n                </div>\n            </div>\n        </div>\n    </div>\n        '});
"use strict";angular.module("qrPonto").factory("auth",["$http","consts",function(a,e){var n=null;function o(){return n||(n=JSON.parse(localStorage.getItem(e.userKey)),a.defaults.headers.common.Authorization=n?n.token:null),n}function u(t,n,o){a.post(e.oapiUrl+"/"+t,n).then(function(t){localStorage.setItem(e.userKey,JSON.stringify(t.data)),a.defaults.headers.common.Authorization=t.data.token,o&&o(null,t.data)}).catch(function(t){o&&o(t.data.errors,null)})}function l(t){n=null,localStorage.removeItem(e.userKey),a.defaults.headers.common.Authorization="",t&&t(null)}return{signup:function(t,n){u("signup",t,n)},login:function(t,n){u("login",t,n)},logout:l,getUser:o,validateToken:function(t,n){t?a.post(e.oapiUrl+"/validateToken",{token:t}).then(function(t){t.data.valid?a.defaults.headers.common.Authorization=o().token:l(),n&&n(null,t.data.valid)}).catch(function(t){n&&n(t.data.errors)}):n&&n("Token inválido.")},buscaCNPJ:function(t,n){a.get(e.buscaCNPJ+"/"+t).then(function(t){n&&n(null,t.data)}).catch(function(t){n&&n(resp.data.errors,null)})}}}]);
"use strict";angular.module("qrPonto").factory("handleResponseError",["$q","$window","consts",function(e,o,t){return{responseError:function(r){return 403===r.status&&(localStorage.removeItem(t.userKey),o.location.href="/"),e.reject(r)}}}]);
"use strict";app.factory("msgs",["toastr",function(o){function c(r,c,n){r instanceof Array?r.forEach(function(r){return o[n](r,c)}):o[n](r,c)}return{addSuccess:function(r){c(r,"Sucesso","success")},addError:function(r){c(r,"Erro","error")}}}]);
"use strict";app.factory("tabs",[function(){return{show:function(t,a){var e=a.tabList,b=void 0!==e&&e,i=a.tabCreate,o=void 0!==i&&i,r=a.tabUpdate,d=void 0!==r&&r,s=a.tabDelete,n=void 0!==s&&s;t.tabList=b,t.tabCreate=o,t.tabUpdate=d,t.tabDelete=n}}}]);